!function(){"use strict";const e="1.0.1",t="FloatingHeader";console.log(`ðŸŽˆ ${t} v${e} - Loading...`);const o=document.currentScript||function(){const e=document.getElementsByTagName("script");return e[e.length-1]}();const n=function(){const e=o.src,t=new URL(e),n=new URLSearchParams(t.search);function i(e){return e?"transparent"===(e=decodeURIComponent(e)).toLowerCase()?"transparent":/^[0-9A-Fa-f]{6}$/.test(e)?"#"+e:(e.startsWith("#"),e):null}return{fontSize:n.get("fontSize")||null,fontFamily:n.get("fontFamily")?decodeURIComponent(n.get("fontFamily")):null,fontWeight:n.get("fontWeight")||null,fontColor:i(n.get("fontColor")),bgColor:i(n.get("bgColor")),transitionSpeed:parseInt(n.get("transitionSpeed")||"600"),startAtBottom:"false"!==n.get("startAtBottom"),zIndex:n.get("zIndex")||"9999",debug:"true"===n.get("debug")}}();function i(e,t=5e3){return new Promise(o=>{for(const t of e){const e=document.querySelector(t);if(e&&e.offsetHeight>0)return n.debug&&console.log("âœ“ Found immediately:",t),void o(e)}const i=new MutationObserver((t,i)=>{for(const t of e){const e=document.querySelector(t);if(e&&e.offsetHeight>0)return n.debug&&console.log("âœ“ Found via observer:",t),i.disconnect(),void o(e)}});i.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{i.disconnect(),console.error("âŒ Element not found after timeout"),o(null)},t)})}n.debug&&console.log("âš™ï¸ Configuration:",n);class FloatingHeaderController{constructor(e,t){this.originalHeader=e,this.firstSection=t,this.wrapper=null,this.isSticky=!1,this.scrollTimeout=null,this.sectionBottom=0,this.headerHeight=0}init(){this.wrapper=document.createElement("div"),this.wrapper.className="anavo-floating-header-wrapper",this.originalHeader.parentNode.insertBefore(this.wrapper,this.originalHeader),this.wrapper.appendChild(this.originalHeader),this.updateDimensions(),n.startAtBottom?this.positionAtBottom():this.positionAtTop(),window.addEventListener("scroll",()=>this.handleScroll(),{passive:!0}),window.addEventListener("resize",()=>this.updateDimensions()),n.debug&&console.log("âœ… Controller initialized")}updateDimensions(){const e=this.firstSection.getBoundingClientRect(),t=window.pageYOffset||document.documentElement.scrollTop;this.sectionBottom=t+e.top+e.height,this.headerHeight=this.wrapper.offsetHeight||60,n.debug&&console.log("ðŸ“ Dimensions updated:",{sectionBottom:this.sectionBottom,headerHeight:this.headerHeight,scrollTop:t})}positionAtBottom(){this.wrapper.style.position="absolute",this.wrapper.style.top=this.sectionBottom-this.headerHeight+"px",this.wrapper.style.bottom="auto",this.isSticky=!1,n.debug&&console.log("ðŸ“ Positioned at BOTTOM of section 1")}positionAtTop(){this.wrapper.style.position="fixed",this.wrapper.style.top="0px",this.wrapper.style.bottom="auto",this.isSticky=!0,n.debug&&console.log("ðŸ“ Positioned at TOP (sticky)")}handleScroll(){clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{const e=window.pageYOffset||document.documentElement.scrollTop,t=this.sectionBottom-this.headerHeight;e>=t&&!this.isSticky?this.positionAtTop():e<t&&this.isSticky&&this.positionAtBottom()},10)}}async function r(){try{console.log("ðŸ”§ Initializing..."),console.log("â³ Waiting for Squarespace to load...");const o=await async function(){return await i(["header.Header","header#header",".sqs-announcement-bar-dropzone + header",'header[data-controller="Header"]',".header",'[data-nc-group="header"]',"header"])}(),r=await async function(){return await i([".page-section:first-of-type","section.page-section:first-of-type","section[data-section-id]:first-of-type","#page > .page-section:first-child","#page section:first-child","main > section:first-child"])}();if(!o)return console.error("âŒ Header not found - aborting"),void console.error("ðŸ’¡ Try adding ?debug=true to see detection logs");if(!r)return console.error("âŒ First section not found - aborting"),void console.error("ðŸ’¡ Check if page has .page-section elements");console.log("âœ“ Header found:",o),console.log("âœ“ First section found:",r),function(){document.getElementById("anavo-floating-header-styles")&&document.getElementById("anavo-floating-header-styles").remove();const t=n.fontColor?`color: ${n.fontColor} !important;`:"",o=n.bgColor?`background-color: ${n.bgColor} !important;`:"",i=n.fontSize?`font-size: ${n.fontSize}px !important;`:"",r=n.fontFamily?`font-family: ${n.fontFamily} !important;`:"",a=n.fontWeight?`font-weight: ${n.fontWeight} !important;`:"",s=document.createElement("style");s.id="anavo-floating-header-styles",s.textContent=`\n      /* ========================================\n         FLOATING HEADER v${e}\n         ======================================== */\n\n      /* Wrapper container */\n      .anavo-floating-header-wrapper {\n        width: 100% !important;\n        z-index: ${n.zIndex} !important;\n        transition: all ${n.transitionSpeed}ms cubic-bezier(0.4, 0, 0.2, 1) !important;\n        left: 0 !important;\n        right: 0 !important;\n      }\n\n      /* Header overrides */\n      .anavo-floating-header-wrapper header,\n      .anavo-floating-header-wrapper .Header,\n      .anavo-floating-header-wrapper .header {\n        ${o}\n        ${t}\n        transition: all ${n.transitionSpeed}ms cubic-bezier(0.4, 0, 0.2, 1) !important;\n        position: static !important;\n        margin: 0 !important;\n      }\n\n      /* Typography override */\n      .anavo-floating-header-wrapper a,\n      .anavo-floating-header-wrapper nav,\n      .anavo-floating-header-wrapper .header-nav-item a {\n        ${i}\n        ${r}\n        ${a}\n        ${t}\n      }\n\n      /* Hide original header position */\n      body > header:not(.anavo-floating-header-wrapper *),\n      body > .Header:not(.anavo-floating-header-wrapper *) {\n        display: none !important;\n      }\n\n      /* Mobile responsive */\n      @media (max-width: 768px) {\n        .anavo-floating-header-wrapper {\n          width: 100% !important;\n        }\n      }\n    `,document.head.appendChild(s),n.debug&&console.log("âœ… Injected styles")}(),await new Promise(e=>setTimeout(e,100));new FloatingHeaderController(o,r).init(),console.log(`âœ… ${t} v${e} Active!`),console.log("   Start Position:",n.startAtBottom?"Bottom of Section 1":"Top (Sticky)"),setTimeout(()=>async function(){try{if(window.AnavoLicenseManager)return null;const o=document.createElement("script");o.src="https://cdn.jsdelivr.net/gh/clonegarden/squarespaceplugins@latest/_shared/licensing.min.js",await new Promise((e,t)=>{o.onload=e,o.onerror=t,document.head.appendChild(o)});const n=new window.AnavoLicenseManager(t,e,{licenseServer:"https://cdn.jsdelivr.net/gh/clonegarden/squarespaceplugins@latest/_shared/licenses.json",showUI:!0});if(await n.init(),!n.isLicensed){const e=document.querySelector("header");e&&n.insertWatermark(e)}return n}catch(e){return console.warn("âš ï¸ License check failed:",e.message),null}}(),1e3)}catch(e){console.error("âŒ Initialization failed:",e),console.error("Stack trace:",e.stack)}}"loading"===document.readyState?window.addEventListener("load",()=>{setTimeout(r,2e3)}):setTimeout(r,2e3)}();