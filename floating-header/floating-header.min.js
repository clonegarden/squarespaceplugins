!function(){"use strict";const t="1.0.0",e="FloatingHeader";console.log(`ðŸŽˆ ${e} v${t} - Loading...`);const o=document.currentScript||function(){const t=document.getElementsByTagName("script");return t[t.length-1]}();const n=function(){const t=o.src,e=new URL(t),n=new URLSearchParams(e.search);function i(t){return t?"transparent"===(t=decodeURIComponent(t)).toLowerCase()?"transparent":/^[0-9A-Fa-f]{6}$/.test(t)?"#"+t:(t.startsWith("#"),t):null}return{fontSize:n.get("fontSize")||null,fontFamily:n.get("fontFamily")?decodeURIComponent(n.get("fontFamily")):null,fontWeight:n.get("fontWeight")||null,fontColor:i(n.get("fontColor")),bgColor:i(n.get("bgColor")),customLogo:n.get("customLogo")?decodeURIComponent(n.get("customLogo")):null,logoWidth:n.get("logoWidth")||null,logoHeight:n.get("logoHeight")||null,transitionSpeed:parseInt(n.get("transitionSpeed")||"600"),stickyTop:n.get("stickyTop")||"0",startAtBottom:"false"!==n.get("startAtBottom"),zIndex:n.get("zIndex")||"9999",debug:"true"===n.get("debug")}}();n.debug&&console.log("âš™ï¸ Configuration:",n);class FloatingHeaderController{constructor(t,e){this.originalHeader=t,this.firstSection=e,this.wrapper=null,this.isFloating=!1,this.scrollTimeout=null,this.sectionBottom=0,this.headerHeight=0}init(){this.wrapper=document.createElement("div"),this.wrapper.className="anavo-floating-header-wrapper",this.originalHeader.parentNode.insertBefore(this.wrapper,this.originalHeader),this.wrapper.appendChild(this.originalHeader),this.updateDimensions(),n.startAtBottom?this.positionAtBottom():this.positionAtTop(),window.addEventListener("scroll",()=>this.handleScroll(),{passive:!0}),window.addEventListener("resize",()=>this.updateDimensions()),n.debug&&console.log("âœ… Controller initialized")}updateDimensions(){const t=this.firstSection.getBoundingClientRect(),e=window.pageYOffset||document.documentElement.scrollTop;this.sectionBottom=e+t.top+t.height,this.headerHeight=this.originalHeader.offsetHeight,n.debug&&console.log("ðŸ“ Dimensions:",{sectionBottom:this.sectionBottom,headerHeight:this.headerHeight})}positionAtBottom(){this.wrapper.style.position="absolute",this.wrapper.style.top=this.sectionBottom-this.headerHeight+"px",this.wrapper.style.left="0",this.wrapper.style.right="0",this.isFloating=!1,n.debug&&console.log("ðŸ“ Positioned at bottom")}positionAtTop(){this.wrapper.style.position="fixed",this.wrapper.style.top=`${n.stickyTop}px`,this.wrapper.style.left="0",this.wrapper.style.right="0",this.isFloating=!0,n.debug&&console.log("ðŸ“ Positioned at top (sticky)")}handleScroll(){clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{const t=window.pageYOffset||document.documentElement.scrollTop,e=this.sectionBottom-this.headerHeight;t>=e&&!this.isFloating?this.positionAtTop():t<e&&this.isFloating&&this.positionAtBottom()},10)}}async function i(){try{console.log("ðŸ”§ Initializing...");const o=function(){const t=["header.Header","#header",".header",'[data-nc-group="header"]','header[data-controller="Header"]'];for(const e of t){const t=document.querySelector(e);if(t)return n.debug&&console.log("âœ“ Header found:",e),t}return console.error("âŒ No header found"),null}(),i=function(){const t=["section[data-section-id]:first-of-type",".page-section:first-of-type","#page > section:first-child","main > section:first-child","[data-section-type]:first-of-type"];for(const e of t){const t=document.querySelector(e);if(t)return n.debug&&console.log("âœ“ First section found:",e),t}return console.error("âŒ No first section found"),null}();if(!o||!i)return void console.error("âŒ Required elements not found - aborting");!function(){document.getElementById("anavo-floating-header-styles")&&document.getElementById("anavo-floating-header-styles").remove();const e=n.fontColor?`color: ${n.fontColor} !important;`:"",o=n.bgColor?`background-color: ${n.bgColor} !important;`:"",i=n.fontSize?`font-size: ${n.fontSize}px !important;`:"",a=n.fontFamily?`font-family: ${n.fontFamily} !important;`:"",r=n.fontWeight?`font-weight: ${n.fontWeight} !important;`:"",s=document.createElement("style");s.id="anavo-floating-header-styles",s.textContent=`\n      /* ========================================\n         FLOATING HEADER v${t}\n         ======================================== */\n\n      /* Container wrapper */\n      .anavo-floating-header-wrapper {\n        position: relative !important;\n        z-index: ${n.zIndex} !important;\n        width: 100% !important;\n        transition: all ${n.transitionSpeed}ms cubic-bezier(0.4, 0, 0.2, 1) !important;\n      }\n\n      /* Header modifications */\n      .anavo-floating-header-wrapper header,\n      .anavo-floating-header-wrapper .Header,\n      .anavo-floating-header-wrapper .header {\n        ${o}\n        ${e}\n        transition: all ${n.transitionSpeed}ms cubic-bezier(0.4, 0, 0.2, 1) !important;\n      }\n\n      /* Typography override */\n      .anavo-floating-header-wrapper a,\n      .anavo-floating-header-wrapper nav,\n      .anavo-floating-header-wrapper .header-nav-item a {\n        ${i}\n        ${a}\n        ${r}\n        ${e}\n      }\n\n      /* Custom logo */\n      ${n.customLogo?`\n        .anavo-floating-header-wrapper .header-title-logo img,\n        .anavo-floating-header-wrapper .header-title-logo a {\n          content: url(${n.customLogo}) !important;\n          ${n.logoWidth?`width: ${n.logoWidth}px !important;`:""}\n          ${n.logoHeight?`height: ${n.logoHeight}px !important;`:""}\n          object-fit: contain !important;\n        }\n      `:""}\n\n      /* Hide original header */\n      body > header,\n      body > .header,\n      body > .Header,\n      #header:not(.anavo-floating-header-wrapper *) {\n        display: none !important;\n      }\n\n      /* Mobile responsive */\n      @media (max-width: 768px) {\n        .anavo-floating-header-wrapper a,\n        .anavo-floating-header-wrapper nav {\n          ${n.fontSize?`font-size: ${Math.max(parseInt(n.fontSize)-2,12)}px !important;`:""}\n        }\n      }\n    `,document.head.appendChild(s),n.debug&&console.log("âœ… Injected styles")}();new FloatingHeaderController(o,i).init(),console.log(`âœ… ${e} v${t} Active!`),console.log("   Start Position:",n.startAtBottom?"Bottom of Section 1":"Top (Sticky)"),async function(){try{if(window.AnavoLicenseManager)return null;const o=document.createElement("script");o.src="https://cdn.jsdelivr.net/gh/clonegarden/squarespaceplugins@latest/_shared/licensing.min.js",await new Promise((t,e)=>{o.onload=t,o.onerror=e,document.head.appendChild(o)});const n=new window.AnavoLicenseManager(e,t,{licenseServer:"https://cdn.jsdelivr.net/gh/clonegarden/squarespaceplugins@latest/_shared/licenses.json",showUI:!0});if(await n.init(),!n.isLicensed){const t=document.querySelector("header");t&&n.insertWatermark(t)}return n}catch(t){return console.warn("âš ï¸ License check failed:",t.message),null}}()}catch(t){console.error("âŒ Initialization failed:",t),console.error("Stack trace:",t.stack)}}"loading"===document.readyState?window.addEventListener("load",()=>setTimeout(i,500)):setTimeout(i,500)}();