!function(){"use strict";console.log("üöÄ Expanded Menu Plugin v2.1.2 - Starting...");const n=document.currentScript||function(){const n=document.getElementsByTagName("script");return n[n.length-1]}();const t=function(){const t=n.src,e=new URL(t),o=new URLSearchParams(e.search);function a(n){return n?"transparent"===(n=decodeURIComponent(n)).toLowerCase()?"transparent":/^[0-9A-Fa-f]{6}$/.test(n)?"#"+n:(n.startsWith("#"),n):null}return{containerWidth:o.get("containerWidth")||"100%",menuSpacing:o.get("menuSpacing")||"60px",tabletSpacing:o.get("tabletSpacing")||"30px",mobileSpacing:o.get("mobileSpacing")||"20px",centerMenu:"false"!==o.get("centerMenu"),mobileMode:o.get("mobileMode")||"custom",bgColor:a(o.get("bgColor")),fontColor:a(o.get("fontColor")),fontFamily:o.get("fontFamily")?decodeURIComponent(o.get("fontFamily")):null,fontSize:o.get("fontSize")||"16",fontWeight:o.get("fontWeight")||"500",hoverOpacity:o.get("hoverOpacity")||"0.7",itemBorderColor:a(o.get("itemBorderColor")),itemBorderWidth:o.get("itemBorderWidth")||"1",sectionBorderColor:a(o.get("sectionBorderColor")),sectionBorderWidth:o.get("sectionBorderWidth")||"1",showItemBorders:"false"!==o.get("showItemBorders"),showSectionBorder:"false"!==o.get("showSectionBorder"),dropdownBgColor:a(o.get("dropdownBgColor")),dropdownShadow:"false"!==o.get("dropdownShadow")}}();function e(n){const e=document.createElement("div");e.className="anavo-menu-wrapper",e.id="anavo-menu-"+Date.now();let o="\n      display: block !important;\n      visibility: visible !important;\n      opacity: 1 !important;\n      width: 100% !important;\n      position: relative !important;\n      z-index: 10000 !important;\n    ";if(null!==t.bgColor?(o+=`background: ${t.bgColor} !important;\n`,o+=`background-color: ${t.bgColor} !important;\n`):(o+="background: var(--white, #fff) !important;\n",o+="background-color: var(--white, #fff) !important;\n"),t.showSectionBorder){const n=t.sectionBorderColor||"var(--lightAccentColor, #e8e8e8)";o+=`border-bottom: ${t.sectionBorderWidth}px solid ${n} !important;\n`}e.style.cssText=o,e.innerHTML=n;const a=document.querySelector(".header")||document.querySelector(".Header")||document.querySelector('[data-nc-group="header"]')||document.querySelector("header");a&&a.parentNode?(a.parentNode.insertBefore(e,a.nextSibling),console.log("‚úÖ Inserted menu AFTER header (outside header element)")):(document.body.insertBefore(e,document.body.firstChild),console.log("‚úÖ Inserted menu at top of body (fallback)")),setTimeout(()=>{const n=document.querySelector(".anavo-custom-menu");if(n){console.log("‚úÖ Menu verified in DOM");const t=n.getBoundingClientRect(),e=n.closest(".anavo-menu-wrapper"),o=e?window.getComputedStyle(e).backgroundColor:"N/A",a=e?window.getComputedStyle(e).background:"N/A";console.log("üìê Menu dimensions:",{width:t.width,height:t.height,display:window.getComputedStyle(n).display,visibility:window.getComputedStyle(n).visibility,opacity:window.getComputedStyle(n).opacity,wrapperBackgroundColor:o,wrapperBackground:a}),0===t.width||0===t.height?console.error("‚ùå Menu still has zero dimensions!"):console.log("‚úÖ Menu is visible with proper dimensions!")}else console.error("‚ùå Menu not found after insertion!")},100),function(){const n=document.querySelectorAll(".anavo-menu-folder");n.forEach(t=>{const e=t.querySelector(".anavo-menu-folder-toggle");e&&e.addEventListener("click",e=>{window.innerWidth<=800&&(e.preventDefault(),t.classList.toggle("anavo-folder-open"),n.forEach(n=>{n!==t&&n.classList.remove("anavo-folder-open")}))})}),console.log(`‚úÖ Initialized ${n.length} folder toggles`)}()}async function o(){try{console.log("üîß Starting initialization...");const n=await new Promise(n=>{const t=[".header-nav-list",".header-menu-nav-list",'[data-folder="root"] .header-nav-list',".header-nav-wrapper .header-nav-list"];function e(){for(const e of t){const t=document.querySelector(e);if(t&&t.children.length>0)return console.log("‚úÖ Found Squarespace navigation:",e),n(t),!0}return!1}if(e())return;let o=0;const a=setInterval(()=>{o++,e()?clearInterval(a):o>=50&&(clearInterval(a),console.error("‚ùå Squarespace navigation not found after 5 seconds"),n(null))},100)});if(!n)return void console.error("‚ùå Failed to find Squarespace navigation - aborting");const o=function(n){if(!n)return console.error("‚ùå Cannot extract menu items - nav list is null"),[];const t=[],e=n.querySelectorAll(".header-nav-item");return console.log(`üìã Found ${e.length} menu items`),e.forEach((n,e)=>{const o=n.querySelector("a");if(!o)return void console.warn(`‚ö†Ô∏è Item ${e} has no link, skipping`);const a={text:o.textContent.trim(),href:o.getAttribute("href")||"#",target:o.getAttribute("target")||"_self",isFolder:n.classList.contains("header-nav-item--folder"),isActive:n.classList.contains("header-nav-item--active"),children:[]};if(a.isFolder){const t=n.querySelector(".header-nav-folder-content");t&&(t.querySelectorAll(".header-nav-folder-item a").forEach(n=>{a.children.push({text:n.textContent.trim(),href:n.getAttribute("href")||"#",target:n.getAttribute("target")||"_self"})}),console.log(`  üìÅ Folder "${a.text}" has ${a.children.length} children`))}t.push(a),console.log(`  ‚úì ${e+1}. ${a.text} ${a.isActive?"(active)":""}`)}),t}(n);if(0===o.length)return void console.error("‚ùå No menu items extracted - aborting");const a=function(n){if(!n||0===n.length)return console.error("‚ùå No menu items to build"),'<nav class="anavo-custom-menu"><p style="color:red;font-size:20px;padding:20px;">No menu items found</p></nav>';const t=n.map((n,t)=>{if(n.isFolder&&n.children.length>0){const e=n.children.map(n=>`<a href="${n.href}" target="${n.target}" class="anavo-menu-dropdown-item">\n            ${n.text}\n          </a>`).join("");return`\n          <div class="anavo-menu-item anavo-menu-folder" data-folder-index="${t}">\n            <span class="anavo-menu-link anavo-menu-folder-toggle">\n              ${n.text}\n              <svg class="anavo-menu-arrow" width="10" height="6" viewBox="0 0 10 6">\n                <path d="M1 1l4 4 4-4" stroke="currentColor" fill="none" stroke-width="1.5"/>\n              </svg>\n            </span>\n            <div class="anavo-menu-dropdown">\n              ${e}\n            </div>\n          </div>\n        `}return`\n          <div class="anavo-menu-item ${n.isActive?"anavo-menu-item--active":""}">\n            <a href="${n.href}" target="${n.target}" class="anavo-menu-link">\n              ${n.text}\n            </a>\n          </div>\n        `}).join("");return console.log("‚úÖ Built custom menu HTML"),`<nav class="anavo-custom-menu" role="navigation">${t}</nav>`}(o);!function(){const n=document.createElement("style");n.id="anavo-hide-squarespace-nav",n.textContent='\n      /* Hide ALL Squarespace navigation */\n      .header-nav,\n      .header-nav-wrapper,\n      .header-nav-list,\n      .header-display-desktop,\n      .header-menu,\n      .header-menu-bg,\n      .header-menu-nav-wrapper,\n      .header-burger,\n      [data-nc-element="header-nav"] {\n        display: none !important;\n        visibility: hidden !important;\n      }\n    ',document.head.appendChild(n),console.log("‚úÖ Hid Squarespace navigation")}(),function(){if(document.getElementById("anavo-expanded-menu-styles"))return void console.log("‚ö†Ô∏è Styles already injected");const n=t.centerMenu?"\n      .anavo-custom-menu {\n        justify-content: center !important;\n      }\n    ":"",e=t.fontColor||"var(--menuTextColor, #000)",o=t.fontFamily||'var(--heading-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif)',a=t.itemBorderColor||"var(--lightAccentColor, #e8e8e8)",i=t.dropdownBgColor||"var(--white, #ffffff)",r=t.showItemBorders?`border-bottom: ${t.itemBorderWidth}px solid ${a} !important;`:"",l=t.dropdownShadow?"box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;":"box-shadow: none !important;",s=document.createElement("style");s.id="anavo-expanded-menu-styles",s.textContent=`\n      /* ANAVO CUSTOM MENU v2.1.2 - TRANSPARENCY FIX */\n      \n      /* CRITICAL: Force wrapper to be visible - NO BACKGROUND IN CSS */\n      div.anavo-menu-wrapper,\n      div[class*="anavo-menu"] {\n        display: block !important;\n        visibility: visible !important;\n        opacity: 1 !important;\n        width: 100% !important;\n        height: auto !important;\n        position: relative !important;\n        z-index: 10000 !important;\n        /* Background set via INLINE STYLES only */\n        overflow: visible !important;\n        clip: auto !important;\n        clip-path: none !important;\n        transform: none !important;\n      }\n\n      /* Force custom menu to be visible */\n      nav.anavo-custom-menu {\n        display: flex !important;\n        visibility: visible !important;\n        opacity: 1 !important;\n        align-items: center !important;\n        gap: ${t.menuSpacing} !important;\n        width: 100% !important;\n        max-width: ${t.containerWidth} !important;\n        margin: 0 auto !important;\n        padding: 20px 2vw !important;\n        font-family: ${o} !important;\n        min-height: 60px !important;\n        box-sizing: border-box !important;\n        ${n}\n      }\n\n      /* Force menu items to be visible */\n      div.anavo-menu-item {\n        display: flex !important;\n        flex-direction: column !important;\n        align-items: center !important;\n        visibility: visible !important;\n        opacity: 1 !important;\n        position: relative !important;\n        white-space: nowrap !important;\n      }\n\n      /* Force links to be visible + CENTERED BORDER */\n      a.anavo-menu-link,\n      span.anavo-menu-link {\n        display: inline-block !important;\n        visibility: visible !important;\n        opacity: 1 !important;\n        padding: 8px 12px !important;\n        padding-bottom: 12px !important;\n        color: ${e} !important;\n        text-decoration: none !important;\n        font-weight: ${t.fontWeight} !important;\n        font-size: ${t.fontSize}px !important;\n        font-family: ${o} !important;\n        letter-spacing: 0.05em !important;\n        transition: opacity 0.2s ease !important;\n        cursor: pointer !important;\n        ${r}\n        text-align: center !important;\n      }\n\n      a.anavo-menu-link:hover,\n      span.anavo-menu-link:hover {\n        opacity: ${t.hoverOpacity} !important;\n      }\n\n      .anavo-menu-item--active .anavo-menu-link {\n        font-weight: ${Math.min(parseInt(t.fontWeight)+200,900)} !important;\n      }\n\n      .anavo-menu-folder {\n        position: relative !important;\n      }\n\n      .anavo-menu-folder-toggle {\n        display: flex !important;\n        align-items: center !important;\n        gap: 5px !important;\n      }\n\n      .anavo-menu-arrow {\n        transition: transform 0.2s ease !important;\n        color: ${e} !important;\n      }\n\n      .anavo-menu-folder:hover .anavo-menu-arrow {\n        transform: rotate(180deg) !important;\n      }\n\n      .anavo-menu-dropdown {\n        position: absolute !important;\n        top: 100% !important;\n        left: 0 !important;\n        min-width: 200px !important;\n        background: ${i} !important;\n        ${l}\n        border-radius: 4px !important;\n        padding: 8px 0 !important;\n        opacity: 0 !important;\n        visibility: hidden !important;\n        transform: translateY(-10px) !important;\n        transition: opacity 0.2s, transform 0.2s, visibility 0.2s !important;\n        z-index: 10001 !important;\n      }\n\n      .anavo-menu-folder:hover .anavo-menu-dropdown {\n        opacity: 1 !important;\n        visibility: visible !important;\n        transform: translateY(0) !important;\n      }\n\n      .anavo-menu-dropdown-item {\n        display: block !important;\n        padding: 12px 20px !important;\n        color: ${e} !important;\n        text-decoration: none !important;\n        font-size: ${Math.max(parseInt(t.fontSize)-2,12)}px !important;\n        font-family: ${o} !important;\n        font-weight: ${t.fontWeight} !important;\n        transition: opacity 0.2s !important;\n      }\n\n      .anavo-menu-dropdown-item:hover {\n        opacity: ${t.hoverOpacity} !important;\n      }\n\n      /* RESPONSIVE BREAKPOINTS */\n\n      @media (max-width: 800px) and (min-width: 480px) {\n        nav.anavo-custom-menu {\n          gap: ${t.tabletSpacing} !important;\n          padding: 15px 1.5vw !important;\n        }\n\n        a.anavo-menu-link,\n        span.anavo-menu-link {\n          font-size: ${Math.max(parseInt(t.fontSize)-2,14)}px !important;\n          padding: 6px 10px !important;\n          padding-bottom: 10px !important;\n        }\n      }\n\n      @media (max-width: 479px) {\n        nav.anavo-custom-menu {\n          gap: ${t.mobileSpacing} !important;\n          padding: 12px 1vw !important;\n          flex-wrap: wrap !important;\n        }\n\n        a.anavo-menu-link,\n        span.anavo-menu-link {\n          font-size: ${Math.max(parseInt(t.fontSize)-4,12)}px !important;\n          padding: 6px 8px !important;\n          padding-bottom: 8px !important;\n        }\n\n        .anavo-menu-dropdown {\n          position: static !important;\n          box-shadow: none !important;\n          background: transparent !important;\n          opacity: 1 !important;\n          visibility: visible !important;\n          transform: none !important;\n          display: none !important;\n          padding: 0 !important;\n          margin-top: 8px !important;\n        }\n\n        .anavo-menu-folder.anavo-folder-open .anavo-menu-dropdown {\n          display: block !important;\n        }\n\n        .anavo-menu-dropdown-item {\n          padding: 8px 16px !important;\n          font-size: ${Math.max(parseInt(t.fontSize)-4,12)}px !important;\n        }\n      }\n    `,document.head.appendChild(s),console.log("‚úÖ Injected custom styles with MAXIMUM specificity")}(),e(a),"burger"===t.mobileMode&&function(){const n=document.getElementById("anavo-hide-squarespace-nav");n&&n.remove();const t=document.createElement("style");t.id="anavo-burger-mode",t.textContent="\n      @media (max-width: 800px) {\n        .anavo-menu-wrapper {\n          display: none !important;\n        }\n\n        .header-burger,\n        .header-menu {\n          display: block !important;\n          visibility: visible !important;\n        }\n      }\n    ",document.head.appendChild(t),console.log("‚úÖ Burger mode enabled")}(),console.log("‚úÖ Expanded Menu Plugin v2.1.2 Active!"),console.log("   Desktop Spacing:",t.menuSpacing),console.log("   Background:",t.bgColor||"CSS Variable (auto)"),console.log("   Font Color:",t.fontColor||"CSS Variable (auto)"),console.log("   Item Border Color:",t.itemBorderColor||"CSS Variable (auto)"),console.log("   Section Border Color:",t.sectionBorderColor||"CSS Variable (auto)"),async function(){try{if(window.AnavoLicenseManager)return null;const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/gh/clonegarden/squarespaceplugins@latest/_shared/licensing.min.js",await new Promise((t,e)=>{n.onload=t,n.onerror=e,document.head.appendChild(n)});const t=new window.AnavoLicenseManager("ExpandedMenu","2.1.2",{licenseServer:"https://cdn.jsdelivr.net/gh/clonegarden/squarespaceplugins@latest/_shared/licenses.json",showUI:!0});if(await t.init(),!t.isLicensed){const n=document.querySelector(".header");n&&t.insertWatermark(n)}return t}catch(n){return console.warn("‚ö†Ô∏è License check failed:",n.message),null}}()}catch(n){console.error("‚ùå Plugin initialization failed:",n),console.error("Stack trace:",n.stack)}}console.log("‚öôÔ∏è Config:",t),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()}();