!function(){"use strict";console.log("üöÄ Expanded Menu Plugin v2.1.0 - Starting...");const n=document.currentScript||function(){const n=document.getElementsByTagName("script");return n[n.length-1]}();const e=function(){const e=n.src,t=new URL(e),o=new URLSearchParams(t.search);return{containerWidth:o.get("containerWidth")||"100%",menuSpacing:o.get("menuSpacing")||"60px",tabletSpacing:o.get("tabletSpacing")||"30px",mobileSpacing:o.get("mobileSpacing")||"20px",centerMenu:"false"!==o.get("centerMenu"),mobileMode:o.get("mobileMode")||"custom",bgColor:o.get("bgColor")?decodeURIComponent(o.get("bgColor")):null,fontColor:o.get("fontColor")?decodeURIComponent(o.get("fontColor")):null,fontFamily:o.get("fontFamily")?decodeURIComponent(o.get("fontFamily")):null,fontSize:o.get("fontSize")||"16",fontWeight:o.get("fontWeight")||"500",hoverOpacity:o.get("hoverOpacity")||"0.7",dropdownBgColor:o.get("dropdownBgColor")?decodeURIComponent(o.get("dropdownBgColor")):null,dropdownShadow:"false"!==o.get("dropdownShadow"),borderBottom:"false"!==o.get("borderBottom"),borderColor:o.get("borderColor")?decodeURIComponent(o.get("borderColor")):null}}();function t(n){const t=document.createElement("div");t.className="anavo-menu-wrapper",t.id="anavo-menu-"+Date.now();let o="\n      display: block !important;\n      visibility: visible !important;\n      opacity: 1 !important;\n      width: 100% !important;\n      position: relative !important;\n      z-index: 10000 !important;\n    ";if(null!==e.bgColor?o+=`background: ${e.bgColor} !important;\n`:o+="background: var(--white, #fff) !important;\n",e.borderBottom){o+=`border-bottom: 1px solid ${e.borderColor||"var(--lightAccentColor, #e8e8e8)"} !important;\n`}t.style.cssText=o,t.innerHTML=n;const a=document.querySelector(".header")||document.querySelector(".Header")||document.querySelector('[data-nc-group="header"]')||document.querySelector("header");a&&a.parentNode?(a.parentNode.insertBefore(t,a.nextSibling),console.log("‚úÖ Inserted menu AFTER header (outside header element)")):(document.body.insertBefore(t,document.body.firstChild),console.log("‚úÖ Inserted menu at top of body (fallback)")),setTimeout(()=>{const n=document.querySelector(".anavo-custom-menu");if(n){console.log("‚úÖ Menu verified in DOM");const e=n.getBoundingClientRect(),t=n.closest(".anavo-menu-wrapper"),o=t?window.getComputedStyle(t).backgroundColor:"N/A";console.log("üìê Menu dimensions:",{top:e.top,left:e.left,width:e.width,height:e.height,display:window.getComputedStyle(n).display,visibility:window.getComputedStyle(n).visibility,opacity:window.getComputedStyle(n).opacity,wrapperBackground:o}),0===e.width||0===e.height?(console.error("‚ùå Menu still has zero dimensions!"),console.error("Computed styles:",window.getComputedStyle(n))):console.log("‚úÖ Menu is visible with proper dimensions!")}else console.error("‚ùå Menu not found after insertion!")},100),function(){const n=document.querySelectorAll(".anavo-menu-folder");n.forEach(e=>{const t=e.querySelector(".anavo-menu-folder-toggle");t&&t.addEventListener("click",t=>{window.innerWidth<=800&&(t.preventDefault(),e.classList.toggle("anavo-folder-open"),n.forEach(n=>{n!==e&&n.classList.remove("anavo-folder-open")}))})}),console.log(`‚úÖ Initialized ${n.length} folder toggles`)}()}async function o(){try{console.log("üîß Starting initialization...");const n=await new Promise(n=>{const e=[".header-nav-list",".header-menu-nav-list",'[data-folder="root"] .header-nav-list',".header-nav-wrapper .header-nav-list"];function t(){for(const t of e){const e=document.querySelector(t);if(e&&e.children.length>0)return console.log("‚úÖ Found Squarespace navigation:",t),n(e),!0}return!1}if(t())return;let o=0;const a=setInterval(()=>{o++,t()?clearInterval(a):o>=50&&(clearInterval(a),console.error("‚ùå Squarespace navigation not found after 5 seconds"),n(null))},100)});if(!n)return void console.error("‚ùå Failed to find Squarespace navigation - aborting");const o=function(n){if(!n)return console.error("‚ùå Cannot extract menu items - nav list is null"),[];const e=[],t=n.querySelectorAll(".header-nav-item");return console.log(`üìã Found ${t.length} menu items`),t.forEach((n,t)=>{const o=n.querySelector("a");if(!o)return void console.warn(`‚ö†Ô∏è Item ${t} has no link, skipping`);const a={text:o.textContent.trim(),href:o.getAttribute("href")||"#",target:o.getAttribute("target")||"_self",isFolder:n.classList.contains("header-nav-item--folder"),isActive:n.classList.contains("header-nav-item--active"),children:[]};if(a.isFolder){const e=n.querySelector(".header-nav-folder-content");e&&(e.querySelectorAll(".header-nav-folder-item a").forEach(n=>{a.children.push({text:n.textContent.trim(),href:n.getAttribute("href")||"#",target:n.getAttribute("target")||"_self"})}),console.log(`  üìÅ Folder "${a.text}" has ${a.children.length} children`))}e.push(a),console.log(`  ‚úì ${t+1}. ${a.text} ${a.isActive?"(active)":""}`)}),e}(n);if(0===o.length)return void console.error("‚ùå No menu items extracted - aborting");const a=function(n){if(!n||0===n.length)return console.error("‚ùå No menu items to build"),'<nav class="anavo-custom-menu"><p style="color:red;font-size:20px;padding:20px;">No menu items found</p></nav>';const e=n.map((n,e)=>{if(n.isFolder&&n.children.length>0){const t=n.children.map(n=>`<a href="${n.href}" target="${n.target}" class="anavo-menu-dropdown-item">\n            ${n.text}\n          </a>`).join("");return`\n          <div class="anavo-menu-item anavo-menu-folder" data-folder-index="${e}">\n            <span class="anavo-menu-link anavo-menu-folder-toggle">\n              ${n.text}\n              <svg class="anavo-menu-arrow" width="10" height="6" viewBox="0 0 10 6">\n                <path d="M1 1l4 4 4-4" stroke="currentColor" fill="none" stroke-width="1.5"/>\n              </svg>\n            </span>\n            <div class="anavo-menu-dropdown">\n              ${t}\n            </div>\n          </div>\n        `}return`\n          <div class="anavo-menu-item ${n.isActive?"anavo-menu-item--active":""}">\n            <a href="${n.href}" target="${n.target}" class="anavo-menu-link">\n              ${n.text}\n            </a>\n          </div>\n        `}).join("");return console.log("‚úÖ Built custom menu HTML"),`<nav class="anavo-custom-menu" role="navigation">${e}</nav>`}(o);!function(){const n=document.createElement("style");n.id="anavo-hide-squarespace-nav",n.textContent='\n      /* Hide ALL Squarespace navigation */\n      .header-nav,\n      .header-nav-wrapper,\n      .header-nav-list,\n      .header-display-desktop,\n      .header-menu,\n      .header-menu-bg,\n      .header-menu-nav-wrapper,\n      .header-burger,\n      [data-nc-element="header-nav"] {\n        display: none !important;\n        visibility: hidden !important;\n      }\n    ',document.head.appendChild(n),console.log("‚úÖ Hid Squarespace navigation")}(),function(){if(document.getElementById("anavo-expanded-menu-styles"))return void console.log("‚ö†Ô∏è Styles already injected");const n=e.centerMenu?"\n      .anavo-custom-menu {\n        justify-content: center !important;\n      }\n    ":"",t=e.bgColor||"var(--white, #fff)",o=e.fontColor||"var(--menuTextColor, #000)",a=e.fontFamily||'var(--heading-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif)',i=e.borderColor||"var(--lightAccentColor, #e8e8e8)",r=e.dropdownBgColor||"var(--white, #ffffff)",l=e.borderBottom?`border-bottom: 1px solid ${i} !important;`:"",s=e.dropdownShadow?"box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;":"box-shadow: none !important;",d=document.createElement("style");d.id="anavo-expanded-menu-styles",d.textContent=`\n      /* ANAVO CUSTOM MENU v2.1.0 - FORCE VISIBILITY + CUSTOMIZATION */\n      \n      /* CRITICAL: Force wrapper to be visible */\n      div.anavo-menu-wrapper,\n      div[class*="anavo-menu"] {\n        display: block !important;\n        visibility: visible !important;\n        opacity: 1 !important;\n        width: 100% !important;\n        height: auto !important;\n        position: relative !important;\n        z-index: 10000 !important;\n        background: ${t} !important;\n        ${l}\n        overflow: visible !important;\n        clip: auto !important;\n        clip-path: none !important;\n        transform: none !important;\n      }\n\n      /* Force custom menu to be visible */\n      nav.anavo-custom-menu {\n        display: flex !important;\n        visibility: visible !important;\n        opacity: 1 !important;\n        align-items: center !important;\n        gap: ${e.menuSpacing} !important;\n        width: 100% !important;\n        max-width: ${e.containerWidth} !important;\n        margin: 0 auto !important;\n        padding: 20px 2vw !important;\n        font-family: ${a} !important;\n        min-height: 60px !important;\n        box-sizing: border-box !important;\n        ${n}\n      }\n\n      /* Force menu items to be visible */\n      div.anavo-menu-item {\n        display: block !important;\n        visibility: visible !important;\n        opacity: 1 !important;\n        position: relative !important;\n        white-space: nowrap !important;\n      }\n\n      /* Force links to be visible */\n      a.anavo-menu-link,\n      span.anavo-menu-link {\n        display: inline-block !important;\n        visibility: visible !important;\n        opacity: 1 !important;\n        padding: 8px 12px !important;\n        color: ${o} !important;\n        text-decoration: none !important;\n        font-weight: ${e.fontWeight} !important;\n        font-size: ${e.fontSize}px !important;\n        font-family: ${a} !important;\n        letter-spacing: 0.05em !important;\n        transition: opacity 0.2s ease !important;\n        cursor: pointer !important;\n      }\n\n      a.anavo-menu-link:hover,\n      span.anavo-menu-link:hover {\n        opacity: ${e.hoverOpacity} !important;\n      }\n\n      .anavo-menu-item--active .anavo-menu-link {\n        font-weight: ${Math.min(parseInt(e.fontWeight)+200,900)} !important;\n      }\n\n      .anavo-menu-folder {\n        position: relative !important;\n      }\n\n      .anavo-menu-folder-toggle {\n        display: flex !important;\n        align-items: center !important;\n        gap: 5px !important;\n      }\n\n      .anavo-menu-arrow {\n        transition: transform 0.2s ease !important;\n        color: ${o} !important;\n      }\n\n      .anavo-menu-folder:hover .anavo-menu-arrow {\n        transform: rotate(180deg) !important;\n      }\n\n      .anavo-menu-dropdown {\n        position: absolute !important;\n        top: 100% !important;\n        left: 0 !important;\n        min-width: 200px !important;\n        background: ${r} !important;\n        ${s}\n        border-radius: 4px !important;\n        padding: 8px 0 !important;\n        opacity: 0 !important;\n        visibility: hidden !important;\n        transform: translateY(-10px) !important;\n        transition: opacity 0.2s, transform 0.2s, visibility 0.2s !important;\n        z-index: 10001 !important;\n      }\n\n      .anavo-menu-folder:hover .anavo-menu-dropdown {\n        opacity: 1 !important;\n        visibility: visible !important;\n        transform: translateY(0) !important;\n      }\n\n      .anavo-menu-dropdown-item {\n        display: block !important;\n        padding: 12px 20px !important;\n        color: ${o} !important;\n        text-decoration: none !important;\n        font-size: ${Math.max(parseInt(e.fontSize)-2,12)}px !important;\n        font-family: ${a} !important;\n        font-weight: ${e.fontWeight} !important;\n        transition: opacity 0.2s !important;\n      }\n\n      .anavo-menu-dropdown-item:hover {\n        opacity: ${e.hoverOpacity} !important;\n      }\n\n      /* RESPONSIVE BREAKPOINTS */\n\n      @media (max-width: 800px) and (min-width: 480px) {\n        nav.anavo-custom-menu {\n          gap: ${e.tabletSpacing} !important;\n          padding: 15px 1.5vw !important;\n        }\n\n        a.anavo-menu-link,\n        span.anavo-menu-link {\n          font-size: ${Math.max(parseInt(e.fontSize)-2,14)}px !important;\n          padding: 6px 10px !important;\n        }\n      }\n\n      @media (max-width: 479px) {\n        nav.anavo-custom-menu {\n          gap: ${e.mobileSpacing} !important;\n          padding: 12px 1vw !important;\n          flex-wrap: wrap !important;\n        }\n\n        a.anavo-menu-link,\n        span.anavo-menu-link {\n          font-size: ${Math.max(parseInt(e.fontSize)-4,12)}px !important;\n          padding: 6px 8px !important;\n        }\n\n        .anavo-menu-dropdown {\n          position: static !important;\n          box-shadow: none !important;\n          background: transparent !important;\n          opacity: 1 !important;\n          visibility: visible !important;\n          transform: none !important;\n          display: none !important;\n          padding: 0 !important;\n          margin-top: 8px !important;\n        }\n\n        .anavo-menu-folder.anavo-folder-open .anavo-menu-dropdown {\n          display: block !important;\n        }\n\n        .anavo-menu-dropdown-item {\n          padding: 8px 16px !important;\n          font-size: ${Math.max(parseInt(e.fontSize)-4,12)}px !important;\n        }\n      }\n    `,document.head.appendChild(d),console.log("‚úÖ Injected custom styles with MAXIMUM specificity")}(),t(a),"burger"===e.mobileMode&&function(){const n=document.getElementById("anavo-hide-squarespace-nav");n&&n.remove();const e=document.createElement("style");e.id="anavo-burger-mode",e.textContent="\n      @media (max-width: 800px) {\n        .anavo-menu-wrapper {\n          display: none !important;\n        }\n\n        .header-burger,\n        .header-menu {\n          display: block !important;\n          visibility: visible !important;\n        }\n      }\n    ",document.head.appendChild(e),console.log("‚úÖ Burger mode enabled")}(),console.log("‚úÖ Expanded Menu Plugin v2.1.0 Active!"),console.log("   Desktop Spacing:",e.menuSpacing),console.log("   Tablet Spacing:",e.tabletSpacing),console.log("   Mobile Spacing:",e.mobileSpacing),console.log("   Mobile Mode:",e.mobileMode),console.log("   Background:",e.bgColor||"CSS Variable (auto)"),console.log("   Font Color:",e.fontColor||"CSS Variable (auto)"),console.log("   Font Family:",e.fontFamily||"CSS Variable (auto)"),console.log("   Font Size:",e.fontSize+"px"),async function(){try{if(window.AnavoLicenseManager)return null;const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/gh/clonegarden/squarespaceplugins@latest/_shared/licensing.min.js",await new Promise((e,t)=>{n.onload=e,n.onerror=t,document.head.appendChild(n)});const e=new window.AnavoLicenseManager("ExpandedMenu","2.1.0",{licenseServer:"https://cdn.jsdelivr.net/gh/clonegarden/squarespaceplugins@latest/_shared/licenses.json",showUI:!0});if(await e.init(),!e.isLicensed){const n=document.querySelector(".header");n&&e.insertWatermark(n)}return e}catch(n){return console.warn("‚ö†Ô∏è License check failed:",n.message),null}}()}catch(n){console.error("‚ùå Plugin initialization failed:",n),console.error("Stack trace:",n.stack)}}console.log("‚öôÔ∏è Config:",e),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()}();