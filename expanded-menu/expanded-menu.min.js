!function(){"use strict";console.log("üöÄ Expanded Menu Plugin v2.0.1 - Starting...");const n=document.currentScript||function(){const n=document.getElementsByTagName("script");return n[n.length-1]}();const e=function(){const e=n.src,t=new URL(e),o=new URLSearchParams(t.search);return{containerWidth:o.get("containerWidth")||"100%",menuSpacing:o.get("menuSpacing")||"60px",tabletSpacing:o.get("tabletSpacing")||"30px",mobileSpacing:o.get("mobileSpacing")||"20px",centerMenu:"false"!==o.get("centerMenu"),mobileMode:o.get("mobileMode")||"custom"}}();function t(n){const e=document.querySelector(".header")||document.querySelector(".Header")||document.querySelector('[data-nc-group="header"]')||document.querySelector("header");if(!e){console.error("‚ùå Could not find header element");const e=document.createElement("div");return e.className="anavo-menu-wrapper",e.innerHTML=n,document.body.insertBefore(e,document.body.firstChild),void console.log("‚ö†Ô∏è Inserted menu at top of body (fallback)")}const t=document.createElement("div");t.className="anavo-menu-wrapper",t.innerHTML=n;const o=e.querySelector(".header-title-logo")||e.querySelector(".header-title")||e.querySelector(".header-display-desktop");o&&o.parentNode?(o.parentNode.insertBefore(t,o.nextSibling),console.log("‚úÖ Inserted menu after logo")):(e.appendChild(t),console.log("‚úÖ Inserted menu at end of header")),function(){const n=document.querySelectorAll(".anavo-menu-folder");n.forEach(e=>{const t=e.querySelector(".anavo-menu-folder-toggle");t&&t.addEventListener("click",t=>{window.innerWidth<=800&&(t.preventDefault(),e.classList.toggle("anavo-folder-open"),n.forEach(n=>{n!==e&&n.classList.remove("anavo-folder-open")}))})}),console.log(`‚úÖ Initialized ${n.length} folder toggles`)}()}async function o(){try{console.log("üîß Starting initialization...");const n=await new Promise(n=>{const e=[".header-nav-list",".header-menu-nav-list",'[data-folder="root"] .header-nav-list',".header-nav-wrapper .header-nav-list"];function t(){for(const t of e){const e=document.querySelector(t);if(e&&e.children.length>0)return console.log("‚úÖ Found Squarespace navigation:",t),n(e),!0}return!1}if(t())return;let o=0;const a=setInterval(()=>{o++,t()?clearInterval(a):o>=50&&(clearInterval(a),console.error("‚ùå Squarespace navigation not found after 5 seconds"),n(null))},100)});if(!n)return void console.error("‚ùå Failed to find Squarespace navigation - aborting");const o=function(n){if(!n)return console.error("‚ùå Cannot extract menu items - nav list is null"),[];const e=[],t=n.querySelectorAll(".header-nav-item");return console.log(`üìã Found ${t.length} menu items`),t.forEach((n,t)=>{const o=n.querySelector("a");if(!o)return void console.warn(`‚ö†Ô∏è Item ${t} has no link, skipping`);const a={text:o.textContent.trim(),href:o.getAttribute("href")||"#",target:o.getAttribute("target")||"_self",isFolder:n.classList.contains("header-nav-item--folder"),isActive:n.classList.contains("header-nav-item--active"),children:[]};if(a.isFolder){const e=n.querySelector(".header-nav-folder-content");e&&(e.querySelectorAll(".header-nav-folder-item a").forEach(n=>{a.children.push({text:n.textContent.trim(),href:n.getAttribute("href")||"#",target:n.getAttribute("target")||"_self"})}),console.log(`  üìÅ Folder "${a.text}" has ${a.children.length} children`))}e.push(a),console.log(`  ‚úì ${t+1}. ${a.text} ${a.isActive?"(active)":""}`)}),e}(n);if(0===o.length)return void console.error("‚ùå No menu items extracted - aborting");const a=function(n){if(!n||0===n.length)return console.error("‚ùå No menu items to build"),'<nav class="anavo-custom-menu"><p style="color:red;">No menu items found</p></nav>';const e=n.map((n,e)=>{if(n.isFolder&&n.children.length>0){const t=n.children.map(n=>`<a href="${n.href}" target="${n.target}" class="anavo-menu-dropdown-item">\n            ${n.text}\n          </a>`).join("");return`\n          <div class="anavo-menu-item anavo-menu-folder" data-folder-index="${e}">\n            <span class="anavo-menu-link anavo-menu-folder-toggle">\n              ${n.text}\n              <svg class="anavo-menu-arrow" width="10" height="6" viewBox="0 0 10 6">\n                <path d="M1 1l4 4 4-4" stroke="currentColor" fill="none" stroke-width="1.5"/>\n              </svg>\n            </span>\n            <div class="anavo-menu-dropdown">\n              ${t}\n            </div>\n          </div>\n        `}return`\n          <div class="anavo-menu-item ${n.isActive?"anavo-menu-item--active":""}">\n            <a href="${n.href}" target="${n.target}" class="anavo-menu-link">\n              ${n.text}\n            </a>\n          </div>\n        `}).join("");return console.log("‚úÖ Built custom menu HTML"),`<nav class="anavo-custom-menu" role="navigation">${e}</nav>`}(o);!function(){const n=document.createElement("style");n.id="anavo-hide-squarespace-nav",n.textContent='\n      /* Hide ALL Squarespace navigation */\n      .header-nav,\n      .header-nav-wrapper,\n      .header-nav-list,\n      .header-display-desktop,\n      .header-menu,\n      .header-menu-bg,\n      .header-menu-nav-wrapper,\n      .header-burger,\n      [data-nc-element="header-nav"] {\n        display: none !important;\n        visibility: hidden !important;\n      }\n    ',document.head.appendChild(n),console.log("‚úÖ Hid Squarespace navigation")}(),function(){if(document.getElementById("anavo-expanded-menu-styles"))return void console.log("‚ö†Ô∏è Styles already injected");const n=e.centerMenu?"\n      .anavo-custom-menu {\n        justify-content: center !important;\n      }\n    ":"",t=document.createElement("style");t.id="anavo-expanded-menu-styles",t.textContent=`\n      /* ANAVO CUSTOM MENU v2.0.1 */\n      \n      .anavo-menu-wrapper {\n        width: 100%;\n        background: var(--white, #fff);\n        border-bottom: 1px solid var(--lightAccentColor, #e8e8e8);\n      }\n\n      .anavo-custom-menu {\n        display: flex;\n        align-items: center;\n        gap: ${e.menuSpacing};\n        width: ${e.containerWidth};\n        max-width: ${e.containerWidth};\n        margin: 0 auto;\n        padding: 20px 2vw;\n        font-family: var(--heading-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif);\n        ${n}\n      }\n\n      .anavo-menu-item {\n        position: relative;\n        white-space: nowrap;\n      }\n\n      .anavo-menu-link {\n        display: inline-block;\n        padding: 8px 12px;\n        color: var(--menuTextColor, currentColor);\n        text-decoration: none;\n        font-weight: 500;\n        font-size: 1rem;\n        letter-spacing: 0.05em;\n        transition: opacity 0.2s ease;\n        cursor: pointer;\n      }\n\n      .anavo-menu-link:hover {\n        opacity: 0.7;\n      }\n\n      .anavo-menu-item--active .anavo-menu-link {\n        font-weight: 700;\n      }\n\n      .anavo-menu-folder {\n        position: relative;\n      }\n\n      .anavo-menu-folder-toggle {\n        display: flex;\n        align-items: center;\n        gap: 5px;\n      }\n\n      .anavo-menu-arrow {\n        transition: transform 0.2s ease;\n      }\n\n      .anavo-menu-folder:hover .anavo-menu-arrow {\n        transform: rotate(180deg);\n      }\n\n      .anavo-menu-dropdown {\n        position: absolute;\n        top: 100%;\n        left: 0;\n        min-width: 200px;\n        background: var(--white, #ffffff);\n        box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        border-radius: 4px;\n        padding: 8px 0;\n        opacity: 0;\n        visibility: hidden;\n        transform: translateY(-10px);\n        transition: opacity 0.2s, transform 0.2s, visibility 0.2s;\n        z-index: 1000;\n      }\n\n      .anavo-menu-folder:hover .anavo-menu-dropdown {\n        opacity: 1;\n        visibility: visible;\n        transform: translateY(0);\n      }\n\n      .anavo-menu-dropdown-item {\n        display: block;\n        padding: 12px 20px;\n        color: var(--menuTextColor, currentColor);\n        text-decoration: none;\n        font-size: 0.95rem;\n        transition: background 0.2s;\n      }\n\n      .anavo-menu-dropdown-item:hover {\n        background: var(--lightAccentColor, #f5f5f5);\n      }\n\n      /* RESPONSIVE BREAKPOINTS */\n\n      /* Tablet (480-800px) */\n      @media (max-width: 800px) and (min-width: 480px) {\n        .anavo-custom-menu {\n          gap: ${e.tabletSpacing};\n          padding: 15px 1.5vw;\n        }\n\n        .anavo-menu-link {\n          font-size: 0.95rem;\n          padding: 6px 10px;\n        }\n      }\n\n      /* Mobile (<480px) */\n      @media (max-width: 479px) {\n        .anavo-custom-menu {\n          gap: ${e.mobileSpacing};\n          padding: 12px 1vw;\n          flex-wrap: wrap;\n        }\n\n        .anavo-menu-link {\n          font-size: 0.9rem;\n          padding: 6px 8px;\n        }\n\n        .anavo-menu-dropdown {\n          position: static;\n          box-shadow: none;\n          background: transparent;\n          opacity: 1;\n          visibility: visible;\n          transform: none;\n          display: none;\n          padding: 0;\n          margin-top: 8px;\n        }\n\n        .anavo-menu-folder.anavo-folder-open .anavo-menu-dropdown {\n          display: block;\n        }\n\n        .anavo-menu-dropdown-item {\n          padding: 8px 16px;\n          font-size: 0.85rem;\n        }\n      }\n    `,document.head.appendChild(t),console.log("‚úÖ Injected custom styles")}(),t(a),"burger"===e.mobileMode&&function(){const n=document.getElementById("anavo-hide-squarespace-nav");n&&n.remove();const e=document.createElement("style");e.id="anavo-burger-mode",e.textContent="\n      @media (max-width: 800px) {\n        .anavo-menu-wrapper {\n          display: none !important;\n        }\n\n        .header-burger,\n        .header-menu {\n          display: block !important;\n          visibility: visible !important;\n        }\n      }\n    ",document.head.appendChild(e),console.log("‚úÖ Burger mode enabled")}(),console.log("‚úÖ Expanded Menu Plugin v2.0.1 Active!"),console.log("   Desktop Spacing:",e.menuSpacing),console.log("   Tablet Spacing:",e.tabletSpacing),console.log("   Mobile Spacing:",e.mobileSpacing),console.log("   Mobile Mode:",e.mobileMode),async function(){try{if(window.AnavoLicenseManager)return null;const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/gh/clonegarden/squarespaceplugins@latest/_shared/licensing.min.js",await new Promise((e,t)=>{n.onload=e,n.onerror=t,document.head.appendChild(n)});const e=new window.AnavoLicenseManager("ExpandedMenu","2.0.1",{licenseServer:"https://cdn.jsdelivr.net/gh/clonegarden/squarespaceplugins@latest/_shared/licenses.json",showUI:!0});if(await e.init(),!e.isLicensed){const n=document.querySelector(".header");n&&e.insertWatermark(n)}return e}catch(n){return console.warn("‚ö†Ô∏è License check failed:",n.message),null}}()}catch(n){console.error("‚ùå Plugin initialization failed:",n),console.error("Stack trace:",n.stack)}}console.log("‚öôÔ∏è Config:",e),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()}();